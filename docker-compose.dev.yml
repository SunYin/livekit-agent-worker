version: '3.8'

services:
  livekit-agent-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    container_name: livekit-agent-worker-dev
    restart: unless-stopped
    volumes:
      # 挂载代码目录以支持热重载
      - ./agent.py:/app/agent.py
      - ./.env:/app/.env
    environment:
      - DASHSCOPE_API_KEY=${DASHSCOPE_API_KEY}
      - LIVEKIT_URL=${LIVEKIT_URL}
      - LIVEKIT_API_KEY=${LIVEKIT_API_KEY}
      - LIVEKIT_API_SECRET=${LIVEKIT_API_SECRET}
    networks:
      - livekit-network
    ports:
      # 调试端口（可选）
      - "5678:5678"

networks:
  livekit-network:
    driver: bridge
